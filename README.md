# Задание №7 Вариант 5
## Генератор перестановок. Задача коммивояжера
1. В Файле `generators/permutation_generator.py` реализовать функцию *generate_permutations*, принимающую множество некоторых элементов и возвращающую список всех перестановок этих элементов. Генерацию перестановок реализовать **используя алгоритм, описанный ниже**. Порядок перестановок в возвращаемом  списке не важен. В списке должны быть однократно представлены все возможные варианты перестановок набора элементов..
2. Используя разработанный генератор перестановок решить задачу коммивояжера методом полного перебора в файле `problems/tsp_problem/brute_force_tsp_solver.py`

## Примечания
- Для решения задачи коммивояжера обязательно использовать реализованный метод get_distance (в родительском классе), а также функцию generate_permutations из файла `generators/permutation_generator.py`.
- Корректность работы функции *generate_permutations* проверить запустив файл `tests/generators/test_permutation_generator.py` с модульными тестами или `test_runner.py`.
- Корректность решения задачи коммивояжера проверить запустив файл `tests/problems/tsp_problem/test_brute_force.py` с модульными тестами или `test_runner.py`.

## Задача коммивояжера
### Постановка задачи
Есть N городов, связанных дорогами. Расстояния между городами известны. Коммивояжер (бродячий торговец) должен выйти из первого города, посетить по одному разу в некотором порядке города 2,3..., n и вернуться в первый город. В каком порядке следует посещать города, чтобы замкнутый путь коммивояжера имел кратчайшее расстояние?
### Математическая модель
Для моделирования задачи можно использовать теорию графов. Города можно перенумеровать и представить в виде вершин графа, а рёбра (*i*, *j*) между вершинами *i* и *j* будут соответствовать пути между этими городами. Каждому ребру (*i*, *j*) можно сопоставить расстояние между городами С<sub>ij</sub> ⩾ 0. Таким образом, задачу можно сформулировать так: 

Дан полный граф с n вершинами, длина ребра (i,j)= С<sub>ij</sub>. Найти гамильтонов цикл минимальной длины.

Гамильтоновым циклом называется маршрут, включающий ровно по одному разу каждую вершину графа.

## Перестановки
Под перестановкой понимается упорядоченный набор без повторений чисел 1 ,   2 ,   … ,   n , обычно трактуемый, как биекция на множестве { 1 , 2 , … , n }, которая числу i ставит в соответствие i-й элемент из набора. Число n при этом называется длиной перестановки. 

Перестановки из n элементов - это размещения по n элементов из n. Количество различных перестановок, определяет сколькими способами можно переупорядочить элементы множества. Количество перестановок обозначается, как P<sub>n</sub>, где n - количество элементов множества.

Число перестановок определяется по формуле P<sub>n</sub> = n!

При этом 0! = 1, так как упорядочить пустое множество можно лишь одним способом - { ∅ }.

Множество из одного элемента также можно упорядочить лишь одним способом - { 1 }. 

Множество из двух элементов можно упорядочить двумя способами - { 12, 21 }.

Множество из трех элементов можно упорядочить шестью способами - { 123, 132, 213, 231, 312, 321 }.

## Генерация всех перестановок.

При решении некоторых задач методом полного перебора требуется сгенерировать все $N!$ перестановок, не пропустив случайно какую-нибудь, и не сгенерировав какую-нибудь перестановку дважды. Существует рекурсивный алгоритм, позволяющий это сделать.

Рекурсивная процедура генерации всех перестановок из $N$ элементов $1,2,3,...,N$ получает на вход один единственный параметр - натуральное число $N$. Она вызывает саму себя, но с параметром $N- 1$, и получает список всех $(N- 1)!$ перестановок из элементов $1,2,3,...,N - 1$ (ниже в таблице $Т_0$ они перечислены в лексикографическом порядке):

| 1   | 2   | 3   | ... | N-2 | N-1 |
|-----|-----|-----|-----|-----|-----|
| 1   | 2   | 3   | ... | N-1 | N-2 |
| ... | ... | ... | ... | ... | ... |
| N-2 | N-1 | N-3 | ... | 2   | 1   |
| N-1 | N-2 | N-3 | ... | 2   | 1   |

---

Затем число $N$ вставляется в каждую строку таблицы $T_0$ перед её первым элементом и получается таблица $T_1$:

| **N** | 1   | 2   | 3   | ... | N-2 | N-1 |
|:-----:|:---:|:---:|:---:|:---:|:---:|:---:|
| **N** | 1   | 2   | 3   | ... | N-1 | N-2 |
| **N** | ... | ... | ... | ... | ... | ... |
| **N** | N-2 | N-1 | N-3 | ... | 2   | 1   |
| **N** | N-1 | N-2 | N-3 | ... | 2   | 1   |

Очевидно, что все строки таблицы $Т_1$ отличаются между собой. Затем в таблице $Т_1$ меняются местами первый и второй столбец. Получается таблица $Т_2$:

| 1   | **N** | 2   | 3   | ... | N-2 | N-1 |
|:---:|:-----:|:---:|:---:|:---:|:---:|:---:|
| 1   | **N** | 2   | 3   | ... | N-1 | N-2 |
| ... | **N** | ... | ... | ... | ... | ... |
| N-2 | **N** | N-1 | N-3 | ... | 2   | 1   |
| N-1 | **N** | N-2 | N-3 | ... | 2   | 1   |

Очевидно, что все её строки различаются между собой и отличаются от строк таблицы $Т_1$. Далее в таблице $Т_2$ меняются местами второй и третий столбец и получается таблица $Т_3$:

| 1   | 2   | **N** | 3   | ... | N-2 | N-1 |
|:---:|:---:|:-----:|:---:|:---:|:---:|:---:|
| 1   | 2   | **N** | 3   | ... | N-1 | N-2 |
| ... | ... | **N** | ... | ... | ... | ... |
| N-2 | N-1 | **N** | N-3 | ... | 2   | 1   |
| N-1 | N-2 | **N** | N-3 | ... | 2   | 1   |

Далее каждая следующая таблица $Т_{k+1}$ получается из предыдущей таблицы $T_k$ перестановкой $k$-го и $(k + 1)$-го столбцов. Последняя таблица $Т_N$ будет иметь вид:


| 1   | 2   | 3   | ... | N-2 | N-1 | **N** |
|:---:|:---:|:---:|:---:|:---:|:---:|:-----:|
| 1   | 2   | 3   | ... | N-1 | N-2 | **N** |
| ... | ... | ... | ... | ... | ... | **N** |
| N-2 | N-1 | N-3 | ... | 2   | 1   | **N** |
| N-1 | N-2 | N-3 | ... | 2   | 1   | **N** |

Очевидно, что все строки таблиц $T_1,T_2,T_3,…,T_N$ попарно различны, суммарное количество строк равно $N!$ и все они представляют собой искомые перестановки чисел $1,2,3,…,N$ (без повторений и пропусков).
